\hypertarget{tool_8h_source}{}\doxysection{tool.\+h}
\label{tool_8h_source}\index{src/slCamera/include/tool/tool.h@{src/slCamera/include/tool/tool.h}}
\mbox{\hyperlink{tool_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#ifndef\ \_\_TOOL\_TOOL\_H\_}}
\DoxyCodeLine{00012\ \textcolor{preprocessor}{\#define\ \_\_TOOL\_TOOL\_H\_}}
\DoxyCodeLine{00013\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ <Eigen/Eigen>}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ <opencv2/core/eigen.hpp>}}
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#include\ <opencv2/opencv.hpp>}}
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#include\ <pcl/point\_cloud.h>}}
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#include\ <pcl/point\_types.h>}}
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#ifdef\ \_\_WITH\_CUDA\_\_}}
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#include\ <cuda/std/cmath>}}
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#include\ <cuda/std/functional>}}
\DoxyCodeLine{00024\ \textcolor{preprocessor}{\#include\ <cuda\_runtime.h>}}
\DoxyCodeLine{00025\ \textcolor{preprocessor}{\#include\ <device\_functions.h>}}
\DoxyCodeLine{00026\ \textcolor{preprocessor}{\#include\ <device\_launch\_parameters.h>}}
\DoxyCodeLine{00027\ \textcolor{preprocessor}{\#include\ <opencv2/cudaarithm.hpp>}}
\DoxyCodeLine{00028\ \textcolor{preprocessor}{\#include\ <opencv2/cudaimgproc.hpp>}}
\DoxyCodeLine{00029\ \textcolor{preprocessor}{\#include\ <opencv2/cudalegacy.hpp>}}
\DoxyCodeLine{00030\ \textcolor{preprocessor}{\#include\ <opencv2/cudastereo.hpp>}}
\DoxyCodeLine{00031\ \textcolor{preprocessor}{\#include\ <opencv2/cudawarping.hpp>}}
\DoxyCodeLine{00032\ \textcolor{preprocessor}{\#endif\ }}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00034\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{matrixs_info_8h}{matrixsInfo.h}}>}}
\DoxyCodeLine{00035\ \textcolor{preprocessor}{\#include\ <typeDef.h>}}
\DoxyCodeLine{00036\ }
\DoxyCodeLine{00038\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacesl}{sl}}\ \{}
\DoxyCodeLine{00040\ \textcolor{keyword}{namespace\ }tool\ \{}
\DoxyCodeLine{00041\ \textcolor{preprocessor}{\#ifdef\ \_\_WITH\_CUDA\_\_}}
\DoxyCodeLine{00043\ \textcolor{keyword}{namespace\ }cudaFunc\ \{}
\DoxyCodeLine{00052\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespacesl_1_1tool_a097962c57f76ef51d0f8b0d5d70db617}{averageTexture}}(IN\ \textcolor{keyword}{const}\ std::vector<cv::Mat>\ \&imgs,}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ OUT\ cv::cuda::GpuMat\ \&texture,}
\DoxyCodeLine{00054\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ IN\ \textcolor{keyword}{const}\ dim3\ block\ =\ dim3(32,\ 8),}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ IN\ cv::cuda::Stream\ \&cvStream\ =\ cv::cuda::Stream::Null());}
\DoxyCodeLine{00068\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespacesl_1_1tool_a77b23aeb41099d5ba98c9d72618a6d6e}{phaseHeightMapEigCoe}}(}
\DoxyCodeLine{00069\ \ \ \ \ IN\ \textcolor{keyword}{const}\ cv::cuda::GpuMat\ \&phase,\ IN\ \textcolor{keyword}{const}\ Eigen::Matrix3f\ \&intrinsic,}
\DoxyCodeLine{00070\ \ \ \ \ IN\ \textcolor{keyword}{const}\ Eigen::Vector<float,\ 8>\ \&coefficient,\ IN\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{float}\ minDepth,}
\DoxyCodeLine{00071\ \ \ \ \ IN\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{float}\ maxDepth,\ OUT\ cv::cuda::GpuMat\ \&depth,}
\DoxyCodeLine{00072\ \ \ \ \ IN\ \textcolor{keyword}{const}\ dim3\ block\ =\ dim3(32,\ 8),}
\DoxyCodeLine{00073\ \ \ \ \ IN\ cv::cuda::Stream\ \&cvStream\ =\ cv::cuda::Stream::Null());}
\DoxyCodeLine{00087\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespacesl_1_1tool_ab96d1a67db4516da5b4ee38df02f5b92}{reverseMappingTexture}}(}
\DoxyCodeLine{00088\ \ \ \ \ IN\ \textcolor{keyword}{const}\ cv::cuda::GpuMat\ \&depth,\ IN\ \textcolor{keyword}{const}\ cv::cuda::GpuMat\ \&textureSrc,}
\DoxyCodeLine{00089\ \ \ \ \ IN\ \textcolor{keyword}{const}\ Eigen::Matrix3f\ \&intrinsicInvD,}
\DoxyCodeLine{00090\ \ \ \ \ IN\ \textcolor{keyword}{const}\ Eigen::Matrix3f\ \&intrinsicT,\ IN\ \textcolor{keyword}{const}\ Eigen::Matrix3f\ \&rotateDToT,}
\DoxyCodeLine{00091\ \ \ \ \ IN\ \textcolor{keyword}{const}\ Eigen::Vector3f\ \&translateDtoT,}
\DoxyCodeLine{00092\ \ \ \ \ OUT\ cv::cuda::GpuMat\ \&textureMapped,\ IN\ \textcolor{keyword}{const}\ dim3\ block\ =\ dim3(32,\ 8),}
\DoxyCodeLine{00093\ \ \ \ \ IN\ cv::cuda::Stream\ \&cvStream\ =\ cv::cuda::Stream::Null());}
\DoxyCodeLine{00104\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespacesl_1_1tool_ac7f472d20297a071d9d9870a9f527d06}{filterPhase}}(IN\ \textcolor{keyword}{const}\ cv::cuda::GpuMat\ \&absPhase,\ OUT\ cv::cuda::GpuMat\ \&out,}
\DoxyCodeLine{00105\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ IN\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{float}\ maxTollerance,\ IN\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ kernel,}
\DoxyCodeLine{00106\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ IN\ \textcolor{keyword}{const}\ dim3\ block\ =\ dim3(32,\ 8),}
\DoxyCodeLine{00107\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ IN\ cv::cuda::Stream\ \&cvStream\ =\ cv::cuda::Stream::Null());}
\DoxyCodeLine{00108\ \}\ \textcolor{comment}{//\ namespace\ cudaFunc}}
\DoxyCodeLine{00109\ \textcolor{preprocessor}{\#endif\ }}
\DoxyCodeLine{00110\ }
\DoxyCodeLine{00122\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespacesl_1_1tool_a77b23aeb41099d5ba98c9d72618a6d6e}{phaseHeightMapEigCoe}}(IN\ \textcolor{keyword}{const}\ cv::Mat\ \&phase,\ IN\ \textcolor{keyword}{const}\ cv::Mat\ \&intrinsic,}
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ IN\ \textcolor{keyword}{const}\ cv::Mat\ \&coefficient,}
\DoxyCodeLine{00124\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ IN\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{float}\ minDepth,\ IN\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{float}\ maxDepth,}
\DoxyCodeLine{00125\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ OUT\ cv::Mat\ \&depth);}
\DoxyCodeLine{00138\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespacesl_1_1tool_ace81483572479730ee31f1bf817e11fa}{phaseHeightMapEigCoeRegion}}(IN\ \textcolor{keyword}{const}\ cv::Mat\ \&phase,}
\DoxyCodeLine{00139\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ IN\ \textcolor{keyword}{const}\ cv::Mat\ \&intrinsic,}
\DoxyCodeLine{00140\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ IN\ \textcolor{keyword}{const}\ cv::Mat\ \&coefficient,}
\DoxyCodeLine{00141\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ IN\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{float}\ minDepth,}
\DoxyCodeLine{00142\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ IN\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{float}\ maxDepth,\ IN\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ rowBegin,}
\DoxyCodeLine{00143\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ IN\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ rowEnd,\ OUT\ cv::Mat\ \&depth);}
\DoxyCodeLine{00151\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespacesl_1_1tool_a097962c57f76ef51d0f8b0d5d70db617}{averageTexture}}(IN\ \textcolor{keyword}{const}\ std::vector<cv::Mat>\ \&imgs,\ OUT\ cv::Mat\ \&texture,}
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ IN\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ phaseShiftStep\ =\ 4);}
\DoxyCodeLine{00163\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespacesl_1_1tool_a10bafa9534e6f21e24943c519faba6fa}{averageTextureRegionGrey}}(IN\ \textcolor{keyword}{const}\ std::vector<cv::Mat>\ \&imgs,}
\DoxyCodeLine{00164\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ OUT\ cv::Mat\ \&texture,\ IN\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ phaseShiftStep,}
\DoxyCodeLine{00165\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ IN\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ rowBegin,\ IN\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ rowEnd);}
\DoxyCodeLine{00176\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespacesl_1_1tool_abbaa43c3b3cc40ac5b613388819b517c}{averageTextureRegionColor}}(IN\ \textcolor{keyword}{const}\ std::vector<cv::Mat>\ \&imgs,}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ OUT\ cv::Mat\ \&texture,}
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ IN\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ phaseShiftStep,}
\DoxyCodeLine{00179\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ IN\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ rowBegin,\ IN\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ rowEnd);}
\DoxyCodeLine{00180\ }
\DoxyCodeLine{00188\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespacesl_1_1tool_ab96d1a67db4516da5b4ee38df02f5b92}{reverseMappingTexture}}(IN\ \textcolor{keyword}{const}\ cv::Mat\ \&depth,\ IN\ \textcolor{keyword}{const}\ cv::Mat\ \&textureIn,}
\DoxyCodeLine{00189\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ IN\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structsl_1_1tool_1_1_info}{Info}}\ \&info,\ OUT\ cv::Mat\ \&textureAlign);}
\DoxyCodeLine{00199\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespacesl_1_1tool_a7c2874f60e901588a0ddcfb283a56818}{reverseMappingTextureRegion}}(IN\ \textcolor{keyword}{const}\ cv::Mat\ \&depth,}
\DoxyCodeLine{00200\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ IN\ \textcolor{keyword}{const}\ cv::Mat\ \&textureIn,}
\DoxyCodeLine{00201\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ IN\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structsl_1_1tool_1_1_info}{Info}}\ \&info,\ OUT\ cv::Mat\ \&textureAlign,}
\DoxyCodeLine{00202\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ IN\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ rowBegin,\ IN\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ rowEnd);}
\DoxyCodeLine{00211\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespacesl_1_1tool_ac7f472d20297a071d9d9870a9f527d06}{filterPhase}}(IN\ \textcolor{keyword}{const}\ cv::Mat\ \&absPhase,\ OUT\ cv::Mat\ \&out,}
\DoxyCodeLine{00212\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ IN\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{float}\ maxTollerance\ =\ 0.5,\ IN\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ kernel\ =\ 5);}
\DoxyCodeLine{00223\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespacesl_1_1tool_a16c12c962e4dad85d0e036b61fb2edd9}{entryFilterPhase}}(IN\ \textcolor{keyword}{const}\ cv::Mat\ \&absPhase,\ OUT\ cv::Mat\ \&out,}
\DoxyCodeLine{00224\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ IN\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ rowBeign,\ IN\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ rowEnd,}
\DoxyCodeLine{00225\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ IN\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{float}\ maxTollerance\ =\ 0.5,\ IN\ \textcolor{keywordtype}{int}\ kernel\ =\ 5);}
\DoxyCodeLine{00236\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespacesl_1_1tool_a7abae77e399e1487e329b0b369affde5}{remapToDepthCamera}}(IN\ \textcolor{keyword}{const}\ cv::Mat\ \&depthIn,\ IN\ \textcolor{keyword}{const}\ cv::Mat\ \&textureIn,}
\DoxyCodeLine{00237\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ IN\ \textcolor{keyword}{const}\ cv::Mat\ \&Q,\ IN\ \textcolor{keyword}{const}\ cv::Mat\ \&M,}
\DoxyCodeLine{00238\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ IN\ \textcolor{keyword}{const}\ cv::Mat\ \&R1,\ OUT\ cv::Mat\ \&depthRemaped,}
\DoxyCodeLine{00239\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ OUT\ pcl::PointCloud<pcl::PointXYZRGB>\ \&cloud);}
\DoxyCodeLine{00240\ \}\ \textcolor{comment}{//\ namespace\ tool}}
\DoxyCodeLine{00241\ \}\ \textcolor{comment}{//\ namespace\ sl}}
\DoxyCodeLine{00242\ }
\DoxyCodeLine{00243\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ TOOL\_TOOL\_H\_}}

\end{DoxyCode}
